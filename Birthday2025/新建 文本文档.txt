<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥å¿«ä¹ ğŸ‚</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }

        .container {
            text-align: center;
            color: white;
            z-index: 10;
            position: relative;
            padding: 20px;
            max-width: 1000px;
            width: 100%;
        }

        #countdown {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 3px 3px 15px rgba(0,0,0,0.5);
            background: linear-gradient(45deg, #fff, #ffd700, #fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        #message {
            font-size: 1.5em;
            margin-bottom: 40px;
            opacity: 0.95;
        }

        .floating-particle {
            position: fixed;
            pointer-events: none;
            z-index: 5;
            opacity: 0;
            font-size: 1.2em;
            animation: floatAndFade 3s ease-in-out forwards;
        }

        .surprise {
            display: none;
            animation: fadeIn 2s ease-in;
        }

        .surprise h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-shadow: 3px 3px 20px rgba(255,255,255,0.5);
        }

        .timeline {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 30px;
            padding: 30px;
            margin: 30px auto;
            backdrop-filter: blur(15px);
            max-width: 800px;
            text-align: left;
            min-height: 200px;
        }

        .timeline h2 {
            text-align: center;
            margin-bottom: 25px;
            font-size: 2em;
        }

        .timeline-item {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border-left: 4px solid #ffd700;
            opacity: 0;
            transform: translateX(-30px);
            animation: slideIn 1s ease-out forwards;
        }

        .timeline-year {
            font-size: 1.3em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 8px;
        }

        .timeline-content {
            font-size: 1.1em;
            line-height: 1.6;
        }

        .heart {
            color: #ff6b9d;
            display: inline-block;
            animation: heartbeat 1.5s ease-in-out infinite;
            font-size: 1.2em;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .photo-slideshow {
            position: relative;
            width: 100%;
            max-width: 700px;
            height: 500px;
            margin: 30px auto;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(0,0,0,0.5);
            background: rgba(0,0,0,0.3);
        }

        .photo-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .photo-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .photo-slide.active {
            opacity: 1;
        }

        .photo-slide img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .photo-counter {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.6);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2em;
            z-index: 10;
        }

        .photo-placeholder {
            font-size: 4em;
            color: rgba(255,255,255,0.3);
        }

        .message-box {
            background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
            padding: 30px;
            border-radius: 20px;
            margin: 30px auto;
            border: 2px solid rgba(255,255,255,0.3);
            backdrop-filter: blur(10px);
            max-width: 700px;
            font-size: 1.4em;
            line-height: 1.8;
        }

        .countdown-container {
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }

        .emoji-circle {
            font-size: 3em;
            margin: 10px;
            display: inline-block;
            animation: bounce 2s ease-in-out infinite;
        }

        #musicControl {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            cursor: pointer;
            font-size: 2em;
            background: rgba(255,255,255,0.2);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        #musicControl:hover {
            transform: scale(1.1);
            background: rgba(255,255,255,0.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateX(-30px);
            }
            to { 
                opacity: 1; 
                transform: translateX(0);
            }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        @keyframes floatAndFade {
            0% { 
                opacity: 0;
                transform: translateY(0) translateX(0);
            }
            20% {
                opacity: 0.3;
            }
            80% {
                opacity: 0.2;
            }
            100% { 
                opacity: 0;
                transform: translateY(-60px) translateX(15px);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @media (max-width: 768px) {
            .photo-slideshow {
                height: 350px;
            }
            #countdown {
                font-size: 2.5em;
            }
            .surprise h1 {
                font-size: 2.5em;
            }
            .timeline {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <canvas id="fireworks"></canvas>
    
    <audio id="bgMusic" loop>
        <source src="figure/music.mp4" type="audio/mp4">
        <source src="figure/music.mp3" type="audio/mpeg">
    </audio>
    
    <div id="musicControl">ğŸ”Š</div>
    
    <div class="container">
        <div id="countdown-container" class="countdown-container">
            <div class="emoji-circle">ğŸ‚</div>
            <div class="emoji-circle" style="animation-delay: 0.3s;">ğŸ’•</div>
            <div class="emoji-circle" style="animation-delay: 0.6s;">ğŸ</div>
            <div id="countdown">00:01:00</div>
            <div id="message">
                âœ¨ è·ç¦»æƒŠå–œæ­æ™“è¿˜æœ‰... âœ¨
            </div>
        </div>

        <div class="surprise" id="surprise">
            <h1>ğŸ‚ ç”Ÿæ—¥å¿«ä¹ æˆ‘çš„å®è´ ğŸ‚</h1>
            
            <div class="timeline">
                <h2>
                    <span class="heart">â¤ï¸</span> æˆ‘ä»¬çš„æ•…äº‹ <span class="heart">â¤ï¸</span>
                </h2>
                <div id="timelineContent"></div>
            </div>

            <div class="photo-slideshow">
                <div class="photo-counter" id="photoCounter">1 / 100</div>
                <div class="photo-container" id="photoContainer"></div>
            </div>

            <div class="message-box">
                <p>ğŸ’– ä»2012åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ä¸€èµ·èµ°è¿‡äº†13å¹´</p>
                <p>ğŸ’– æ„Ÿè°¢ä½ ä¸€ç›´ä»¥æ¥çš„é™ªä¼´å’ŒåŒ…å®¹</p>
                <p>ğŸ’– æ„Ÿè°¢ä½ è®©æˆ‘æˆä¸ºæ›´å¥½çš„è‡ªå·±</p>
                <p>ğŸ’– æœªæ¥çš„æ¯ä¸€å¤©ï¼Œæˆ‘éƒ½æƒ³å’Œä½ ä¸€èµ·åº¦è¿‡</p>
                <p style="margin-top: 20px; font-size: 1.3em;">
                    <span class="heart">â™¥</span> ç”Ÿæ—¥å¿«ä¹ï¼Œæ°¸è¿œçˆ±ä½  <span class="heart">â™¥</span>
                </p>
            </div>

            <div style="margin-top: 30px; font-size: 2em;">
                ğŸˆğŸŠğŸ‰ğŸğŸ‚ğŸ’ğŸŒ¹âœ¨ğŸ’–ğŸ’•ğŸ’
            </div>
        </div>
    </div>

    <script>
        const birthday = new Date().getTime() + 60000;

        const bgMusic = document.getElementById('bgMusic');
        const musicControl = document.getElementById('musicControl');
        let isMusicPlaying = false;
        let musicStarted = false;

        musicControl.addEventListener('click', () => {
            if (isMusicPlaying) {
                bgMusic.pause();
                musicControl.textContent = 'ğŸ”‡';
                isMusicPlaying = false;
            } else {
                bgMusic.play().catch(e => console.log('éŸ³ä¹æ’­æ”¾å¤±è´¥:', e));
                musicControl.textContent = 'ğŸ”Š';
                isMusicPlaying = true;
            }
        });

        const timelineData = [
            { year: '2012å¹´ ğŸ’«', content: 'æˆ‘ä»¬åœ¨æ–‡å³°ä¸­å­¦ç›¸è¯†ï¼Œé‚£æ—¶çš„æˆ‘ä»¬è¿˜æ˜¯é’æ¶©çš„é«˜ä¸­ç”Ÿ' },
            { year: '2015å¹´ ğŸ“š', content: 'é™‡è¥¿ä¸€ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·è¡¥ä¹ ï¼Œä¸€èµ·ä¸ºæ¢¦æƒ³åŠªåŠ›' },
            { year: '2016å¹´ ğŸ’˜', content: 'è¿™ä¸€å¹´ï¼Œæˆ‘ä»¬æ­£å¼åœ¨ä¸€èµ·äº†ï¼ä»æ­¤å¼€å§‹äº†æˆ‘ä»¬çš„çˆ±æƒ…é•¿è·‘' },
            { year: '2016-2020å¹´ ğŸ’Œ', content: 'å››å¹´å¼‚åœ°ï¼Œè™½ç„¶ç›¸éš”ä¸¤åœ°ï¼Œä½†æˆ‘ä»¬çš„å¿ƒå§‹ç»ˆåœ¨ä¸€èµ·' },
            { year: '2020-2023å¹´ ğŸ ', content: 'ç»ˆäºåœ¨è¥¿å®‰ç›¸èšï¼Œä¸‰å¹´çš„æœå¤•ç›¸å¤„ï¼Œæ˜¯æˆ‘æœ€å¹¸ç¦çš„æ—¶å…‰' },
            { year: '2023-2025å¹´ ğŸŒ™', content: 'å†æ¬¡å¼‚åœ°ï¼Œä½†æˆ‘ä»¬çš„çˆ±ä¾ç„¶åšå®šä¸ç§»' },
            { year: '2025.10-2026.10 âœˆï¸', content: 'å¼‚å›½ä¸€å¹´ï¼Œè·ç¦»å†è¿œä¹Ÿéš”ä¸æ–­æˆ‘ä»¬çš„æ€å¿µ' },
            { year: 'æœªæ¥ âˆ', content: 'æ— è®ºæœªæ¥å¦‚ä½•ï¼Œæˆ‘ä»¬ä¼šä¸€ç›´æºæ‰‹èµ°ä¸‹å» ğŸ’•', special: true }
        ];

        let timelineIndex = 0;

        function showNextTimelineItem() {
            if (timelineIndex < timelineData.length) {
                const item = timelineData[timelineIndex];
                const timelineContent = document.getElementById('timelineContent');
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'timeline-item';
                if (item.special) {
                    itemDiv.style.borderLeftColor = '#ff6b9d';
                }
                
                itemDiv.innerHTML = `
                    <div class="timeline-year" style="${item.special ? 'color: #ff6b9d;' : ''}">${item.year}</div>
                    <div class="timeline-content">${item.content}</div>
                `;
                
                timelineContent.appendChild(itemDiv);
                timelineIndex++;
                
                if (timelineIndex < timelineData.length) {
                    setTimeout(showNextTimelineItem, 8000);
                }
            }
        }

        const photoFiles = Array.from({length: 100}, (_, i) => `figure/${i + 1}.jpg`);
        let currentPhotoIndex = 0;
        let photoInterval;

        function createFloatingParticle() {
            const particles = ['ğŸ’•', 'ğŸ’–', 'â­', 'âœ¨'];
            const particle = document.createElement('div');
            particle.className = 'floating-particle';
            particle.textContent = particles[Math.floor(Math.random() * particles.length)];
            
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            
            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 3000);
        }

        function startParticleEffect() {
            setInterval(() => {
                createFloatingParticle();
            }, 6000);
        }

        function loadPhotos() {
            const container = document.getElementById('photoContainer');
            
            photoFiles.forEach((filename, index) => {
                const slide = document.createElement('div');
                slide.className = 'photo-slide';
                if (index === 0) slide.classList.add('active');
                
                const img = document.createElement('img');
                img.src = filename;
                img.alt = `ç…§ç‰‡ ${index + 1}`;
                img.onerror = function() {
                    this.style.display = 'none';
                    const placeholder = document.createElement('div');
                    placeholder.className = 'photo-placeholder';
                    placeholder.textContent = 'ğŸ“·';
                    slide.appendChild(placeholder);
                };
                
                slide.appendChild(img);
                container.appendChild(slide);
            });
            
            startPhotoSlideshow();
        }

        function showPhoto(index) {
            const slides = document.querySelectorAll('.photo-slide');
            const counter = document.getElementById('photoCounter');
            
            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');
            counter.textContent = `${index + 1} / 100`;
            
            currentPhotoIndex = index;
        }

        function startPhotoSlideshow() {
            currentPhotoIndex = 0;
            showPhoto(0);
            
            photoInterval = setInterval(() => {
                currentPhotoIndex++;
                if (currentPhotoIndex >= photoFiles.length) {
                    currentPhotoIndex = 0;
                }
                showPhoto(currentPhotoIndex);
            }, 3000);
        }

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = birthday - now;

            // å€’è®¡æ—¶å‰©ä½™5ç§’æ—¶å¼€å§‹æ’­æ”¾éŸ³ä¹
            if (distance <= 5000 && distance > 4000 && !musicStarted) {
                console.log('5ç§’å€’è®¡æ—¶ï¼Œå¼€å§‹æ’­æ”¾éŸ³ä¹');
                musicStarted = true;
                bgMusic.play().then(() => {
                    musicControl.style.display = 'flex';
                    musicControl.textContent = 'ğŸ”Š';
                    isMusicPlaying = true;
                }).catch(e => {
                    console.log('è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œæ˜¾ç¤ºæ§åˆ¶æŒ‰é’®');
                    musicControl.style.display = 'flex';
                    musicControl.style.animation = 'pulse 1s ease-in-out infinite';
                });
            }

            if (distance < 0) {
                document.getElementById('countdown-container').style.display = 'none';
                document.getElementById('surprise').style.display = 'block';
                
                if (!musicStarted) {
                    musicStarted = true;
                    bgMusic.play().catch(e => {
                        musicControl.style.display = 'flex';
                        musicControl.style.animation = 'pulse 1s ease-in-out infinite';
                    });
                }
                
                startFireworks();
                startParticleEffect();
                loadPhotos();
                
                setTimeout(() => {
                    showNextTimelineItem();
                }, 2000);
                
                return;
            }

            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById('countdown').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();

        // çƒŸèŠ±æ•ˆæœ
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        let rockets = [];

        class Rocket {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = canvas.height;
                this.targetY = Math.random() * canvas.height * 0.4 + canvas.height * 0.1;
                this.speed = Math.random() * 3 + 5;
                this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
                this.exploded = false;
                this.trail = [];
            }

            update() {
                if (!this.exploded) {
                    this.y -= this.speed;
                    
                    this.trail.push({ x: this.x, y: this.y, alpha: 1 });
                    if (this.trail.length > 10) {
                        this.trail.shift();
                    }
                    
                    if (this.y <= this.targetY) {
                        this.explode();
                    }
                }
            }

            draw() {
                if (!this.exploded) {
                    this.trail.forEach((point, index) => {
                        const alpha = (index / this.trail.length) * 0.8;
                        ctx.save();
                        ctx.globalAlpha = alpha;
                        ctx.fillStyle = this.color;
                        ctx.beginPath();
                        ctx.arc(point.x, point.y, 2, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.restore();
                    });
                    
                    ctx.save();
                    ctx.fillStyle = this.color;
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = this.color;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
            }

            explode() {
                this.exploded = true;
                
                const types = ['circle', 'ring', 'heart', 'star', 'photo'];
                const type = types[Math.floor(Math.random() * types.length)];
                
                const photoColors = [
                    '#ff6b9d', '#ffd700', '#87ceeb', '#98fb98', '#dda0dd',
                    '#ff69b4', '#ffa500', '#00ced1', '#ff1493', '#7fffd4'
                ];
                
                if (type === 'circle') {
                    for (let i = 0; i < 100; i++) {
                        particles.push(new Particle(this.x, this.y, this.color, 'normal'));
                    }
                } else if (type === 'ring') {
                    for (let i = 0; i < 60; i++) {
                        particles.push(new Particle(this.x, this.y, this.color, 'ring', i));
                    }
                } else if (type === 'heart') {
                    for (let i = 0; i < 50; i++) {
                        particles.push(new Particle(this.x, this.y, '#ff6b9d', 'heart', i));
                    }
                } else if (type === 'star') {
                    for (let i = 0; i < 60; i++) {
                        particles.push(new Particle(this.x, this.y, '#ffd700', 'star', i));
                    }
                } else if (type === 'photo') {
                    for (let i = 0; i < 300; i++) {
                        const color = photoColors[Math.floor(Math.random() * photoColors.length)];
                        particles.push(new Particle(this.x, this.y, color, 'photo', i, true));
                    }
                }
            }
        }

        class Particle {
            constructor(x, y, color, type = 'normal', index = 0, photoMode = false) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.alpha = 1;
                this.size = Math.random() * 4 + 2;
                this.life = 120;
                this.photoMode = photoMode;
                
                if (type === 'normal') {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 6 + 3;
                    this.vx = Math.cos(angle) * speed;
                    this.vy = Math.sin(angle) * speed;
                } else if (type === 'ring') {
                    const angle = (index / 60) * Math.PI * 2;
                    const speed = 8;
                    this.vx = Math.cos(angle) * speed;
                    this.vy = Math.sin(angle) * speed;
                } else if (type === 'heart') {
                    const t = (index / 50) * Math.PI * 2;
                    const scale = 0.25;
                    const heartX = scale * 16 * Math.pow(Math.sin(t), 3);
                    const heartY = -scale * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                    this.vx = heartX;
                    this.vy = heartY;
                } else if (type === 'star') {
                    const angle = (index / 60) * Math.PI * 2;
                    const radius = (index % 2 === 0) ? 10 : 5;
                    this.vx = Math.cos(angle) * radius;
                    this.vy = Math.sin(angle) * radius;
                } else if (type === 'photo') {
                    const cols = 20;
                    const rows = 15;
                    const col = index % cols;
                    const row = Math.floor(index / cols);
                    const scale = 0.8;
                    this.vx = (col - cols/2) * scale;
                    this.vy = (row - rows/2) * scale;
                    this.size = 3;
                }
                
                this.gravity = 0.08;
                this.friction = 0.99;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += this.gravity;
                this.alpha -= 0.008;
                this.life--;
                
                this.vx *= this.friction;
                this.vy *= this.friction;
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                
                if (this.photoMode && this.alpha > 0.3) {
                    const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size * 2);
                    gradient.addColorStop(0, this.color);
                    gradient.addColorStop(1, 'rgba(255,255,255,0.1)');
                    ctx.fillStyle = gradient;
                } else {
                    ctx.fillStyle = this.color;
                }
                
                ctx.shadowBlur = 15;
                ctx.shadowColor = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                
                if (this.alpha > 0.5) {
                    ctx.globalAlpha = this.alpha * 0.3;
                    ctx.shadowBlur = 30;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size * 2, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                ctx.restore();
            }
        }

        function launchRocket() {
            rockets.push(new Rocket());
        }

        let fireworksActive = false;

        function startFireworks() {
            fireworksActive = true;
            function scheduleNextRocket() {
                if (fireworksActive) {
                    launchRocket();
                    const delay = Math.random() * 1000 + 1000;
                    setTimeout(scheduleNextRocket, delay);
                }
            }
            scheduleNextRocket();
        }

        function animate() {
            if (fireworksActive) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.08)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                const MAX_PARTICLES = 1500;
                if (particles.length > MAX_PARTICLES) {
                    particles = particles.slice(-MAX_PARTICLES);
                }

                rockets = rockets.filter(r => !r.exploded);
                rockets.forEach(r => {
                    r.update();
                    r.draw();
                });

                particles = particles.filter(p => p.alpha > 0 && p.life > 0);
                particles.forEach(p => {
                    p.update();
                    p.draw();
                });
            }
            requestAnimationFrame(animate);
        }

        animate();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>